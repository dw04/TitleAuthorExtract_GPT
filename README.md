# Research Paper Filename Proposer

These helper scripts support you in renaming your research paper pdf collection. The provided scripts extract the beginning of a paper as raw text and then utilize `ChatGPT` to find the last name of the first author and the paper title. Both are then used to query the publication year using `api.crossref.org`. In total, this will suggest a filename with the scheme YEAR-AUTHOR-TITLE.

#### Known Limitations

- The filename proposals are generated by using ChatGPT. Be aware that the proposals can be wrong!
- The title and author must be on the first pdf page!

## API Key Setup

You will need an OpenAI API key to run these scripts:

1. Obtain an API key from OpenAI:
   If you don't have an API key yet, you can sign up for one at the OpenAI website (https://platform.openai.com/signup). Once you have signed up, you will find your API key on the OpenAI Dashboard (https://platform.openai.com/account/api-keys).

2. Set the API key in your environment:
   You have two options to set the API key:

   Option A - Set the API key as an environment variable:
   - On Unix-based systems (Linux or macOS), open your terminal and run the following command:
     ```
     export OPENAI_API_KEY=your_api_key_here
     ```
     Replace `your_api_key_here` with your actual API key.

   - On Windows, open the Command Prompt and run the following command:
     ```
     setx OPENAI_API_KEY "your_api_key_here"
     ```
     Replace `your_api_key_here` with your actual API key.

   Option B - Set the API key directly in the script:
   - Open the script filename_proposer.py in a text editor and locate the following line:
     ```
     openai.api_key = os.getenv("OPENAI_API_KEY") or "your_api_key_here"
     ```
     Replace `your_api_key_here` with your actual API key, making sure to keep it within the quotes.

## Scripts

### rename_helper.py

This script combines the filename_proposer.py with a pdf preview and a GUI that supports you in renaming your pdf files.

#### Requirements

To run this script, you need the following Python packages:

- tkinter
- pdf2image
- PIL (Python Imaging Library)
- filename_proposer (see below)

You can install these packages using pip:

```bash
pip install tkinter pdf2image pillow
```

#### How to Use

1. Make sure the `filename_proposer` module is available in your project directory or Python path.
2. Run the script from the command line, providing the folder path containing the PDF files as an argument:

```
python rename_helper.py -f /path/to/folder/with/pdf/files
```

3. If you want to automatically rename files without user confirmation, use the `--auto_rename` flag (use this option with caution):

```
python rename_helper.py -f /path/to/folder/with/pdf/files --auto_rename
```

4. A window will pop up displaying the first page preview of a PDF file, along with the current filename and the proposed new filename.

5. You can choose one of the following actions:
    - Click "Yes" to rename the file to the proposed filename.
    - Click "No" to skip renaming the file and move to the next one.
    - Close the window to exit the script.

6. The script will loop through all the PDF files in the folder, displaying a preview and proposed filename for each one.

### filename_proposer.py

This script helps you to generate proposed filenames for research papers using the scheme YEAR-AUTHOR-TITLE. It utilizes the `pdfplumber` library to extract text from the first page of a PDF and the OpenAI GPT model to identify the title and the last name of the first author.

#### Dependencies

- pdfplumber
- openai
- os
- sys
- argparse
- re
- json

#### Installation

1. Clone this repository.
2. Install the required libraries by running `pip install pdfplumber openai`

#### Usage

There are two ways to use this script: providing a single PDF file or providing a folder containing multiple PDF files. The script will then suggest a filename for each PDF file.

##### Single PDF File

```bash
python filename_proposer.py --pdf_file /path/to/pdf/file.pdf --suggest_filename
```

##### Folder with PDF Files

```bash
python filename_proposer.py --folder /path/to/pdf/folder/ --suggest_filename
```

##### Output JSON

If you prefer to get the output in JSON format, you can use the `--output_json` flag:

```bash
python filename_proposer.py --pdf_file /path/to/pdf/file.pdf --output_json
```

#### Example

For example, if you provide the script with a PDF file containing the research paper "The Effectiveness of Deep Learning" by John Doe, the output might look like this:

```plaintext
/path/to/pdf/file.pdf
---> Doe-The_Effectiveness_of_Deep_Learning.pdf
```